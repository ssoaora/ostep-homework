
# 개요

이 프로그램은 기본 및 경계 레지스터가 있는 시스템에서 주소 변환이 어떻게 수행되는지 확인할 수 있게 해줍니다. 이전과 마찬가지로, 프로그램을 실행하여 기본 및 경계에 대한 이해를 테스트하는 두 단계가 있습니다. 먼저 -c 플래그 없이 실행하여 일련의 변환을 생성하고 직접 주소 변환을 올바르게 수행할 수 있는지 확인하십시오. 그런 다음 완료되면 -c 플래그를 사용하여 실행하여 답을 확인하십시오.

이 과제에서는 힙과 스택이 주소 공간의 반대쪽 끝에 있는 표준 주소 공간과 약간 다른 주소 공간을 가정합니다. 대신, 코드 섹션, 고정 크기(작은) 스택, 그리고 그 바로 아래로 확장되는 힙이 있는 주소 공간을 가정합니다. 아래 그림에서 보는 것과 같은 형태입니다. 이 구성에서는 주소 공간의 더 높은 영역으로 성장하는 한 방향만 있습니다.

```sh
  -------------- 0KB
  |    코드    |
  -------------- 2KB
  |   스택    |
  -------------- 4KB
  |    힙    |
  |     |      |
  |     v      |
  -------------- 7KB
  |   (여유)   |
  |     ...    |
```

그림에서 경계 레지스터는 주소 공간의 끝을 나타내는 7KB로 설정됩니다. 경계 내의 모든 주소 참조는 합법적인 것으로 간주됩니다. 이 값을 초과하는 참조는 경계를 벗어난 것으로 간주되어 하드웨어가 예외를 발생시킵니다.

기본 플래그로 실행하려면 명령줄에서 relocation.py를 입력하십시오. 결과는 다음과 같을 것입니다:

```sh
prompt> ./relocation.py 
...
기본 및 경계 레지스터 정보:

  기본   : 0x00003082 (10진수 12418)
  한계  : 472

가상 주소 추적
  VA  0: 0x01ae (10진수:430) -> PA 또는 위반?
  VA  1: 0x0109 (10진수:265) -> PA 또는 위반?
  VA  2: 0x020b (10진수:523) -> PA 또는 위반?
  VA  3: 0x019e (10진수:414) -> PA 또는 위반?
  VA  4: 0x0322 (10진수:802) -> PA 또는 위반?
```

각 가상 주소에 대해 변환되는 물리 주소를 적거나 경계를 벗어난 주소(세그먼트 위반)임을 적으십시오. 이 문제에서는 주어진 크기의 간단한 가상 주소 공간을 가정해야 합니다.

보시다시피, 과제는 단순히 무작위 가상 주소를 생성합니다. 각 주소에 대해 경계 내에 있는지 여부를 결정하고, 그렇다면 변환되는 물리 주소를 결정하십시오. -c("이것을 계산해줘" 플래그)로 실행하면 이러한 변환의 결과, 즉 유효한지 여부와 유효한 경우 결과 물리 주소를 제공합니다. 편의를 위해 모든 숫자는 16진수와 10진수로 제공됩니다.

```sh
prompt> ./relocation.py -c
...
가상 주소 추적
  VA  0: 0x01ae (10진수:430) -> 유효: 0x00003230 (10진수:12848)
  VA  1: 0x0109 (10진수:265) -> 유효: 0x0000318b (10진수:12683)
  VA  2: 0x020b (10진수:523) -> 세그먼트 위반
  VA  3: 0x019e (10진수:414) -> 유효: 0x00003220 (10진수:12832)
  VA  4: 0x0322 (10진수:802) -> 세그먼트 위반
```

기본 주소가 12418(10진수)인 경우, 주소 430은 경계 레지스터 472보다 작기 때문에 경계 내에 있으며 12418에 430을 더한 12848로 변환됩니다. 위의 몇몇 주소는 경계를 초과하여 경계를 벗어났기 때문에 유효하지 않습니다(523, 802). 매우 간단하지 않습니까? 실제로, 기본 및 경계의 아름다움 중 하나는 매우 간단하다는 것입니다!

다음과 같은 몇 가지 플래그를 사용하여 상황을 더 잘 제어할 수 있습니다:

```sh
prompt> ./relocation.py -h
사용법: relocation.py [옵션]

옵션:
  -h, --help            도움말 메시지를 표시하고 종료합니다
  -s SEED, --seed=SEED  랜덤 시드
  -a ASIZE, --asize=ASIZE 주소 공간 크기 (예: 16, 64k, 32m)
  -p PSIZE, --physmem=PSIZE 물리 메모리 크기 (예: 16, 64k)
  -n NUM, --addresses=NUM 생성할 가상 주소 수
  -b BASE, --b=BASE     기본 레지스터 값
  -l LIMIT, --l=LIMIT   경계 레지스터 값
  -c, --compute         답을 계산합니다
```

특히, 가상 주소 공간 크기(-a), 물리 메모리 크기(-p), 생성할 가상 주소 수(-n), 이 프로세스의 기본 및 경계 레지스터 값(-b 및 -l)을 제어할 수 있습니다.
